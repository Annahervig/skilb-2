enum ActionKind {
    Walking,
    Idle,
    Jumping
}
namespace SpriteKind {
    export const Port = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Port, function (sprite, otherSprite) {
    sprite.startEffect(effects.rings, 500)
    Speed += 5
    Speed = Math.max(Speed, -20)
    resetSpeeds()
    scene.cameraShake(4, 200)
    effects.blizzard.startScreenEffect(100)
})
function runningKids () {
    kids = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............555..............
        ...............555..............
        ................5...............
        ................5...............
        ...............55...............
        ..............5555..............
        ..........55555.555.............
        ..........5.....5.55............
        ................5..55...........
        ................5...5...........
        ................5...............
        ................5...............
        ................55..............
        ...............5.55.............
        ...............5...5............
        ..............5.....5...........
        .............55......55.........
        .............5........5.........
        .......................5........
        ................................
        `, SpriteKind.Enemy)
    kids.setKind(SpriteKind.Enemy)
    kids.y = scene.screenHeight()
    kids.setVelocity(randint(-100, 100), randint(-100, -20))
    if (0 > kids.vx) {
        kids.setImage(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................777.............
            ...............7777.............
            .................7..............
            ................7...............
            .........77.....7.....77........
            ..........77....7...777.........
            ...........77...7..777..........
            ............777.7.77............
            .............777777.............
            .............7.7777.............
            ..............777..7............
            ..............77...77...........
            ..............77....7...........
            .............77......7..........
            .............7........7.........
            ............77........77........
            ............7...................
            ............7...................
            ................................
            ................................
            ................................
            `)
    }
}
function resetSpeeds () {
    sprite_list = sprites.allOfKind(SpriteKind.Port)
    for (let value2 of sprite_list) {
        value2.setVelocity(0, Speed)
    }
}
let projectile: Sprite = null
let sprite_list: Sprite[] = []
let kids: Sprite = null
let Speed = 0
scene.setBackgroundColor(1)
let Skier = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ...................8............
    ...............8...8............
    ...............8...8............
    ...............8...8............
    ...............8...8............
    ...............8...8............
    ...............82228............
    ...............22222............
    ..............2222222...........
    ..............2222222...........
    ...............222222...........
    ...............82228............
    ...............8...8............
    ...............8...8............
    ...............8...8............
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `, SpriteKind.Player)
Skier.setStayInScreen(true)
Skier.x = 100
Skier.setPosition(72, 99)
Speed = -20
controller.moveSprite(Skier)
runningKids()
resetSpeeds()
forever(function () {
    let portChance = 0
    if (Math.percentChance(2)) {
        if (Math.percentChance(portChance)) {
            projectile = sprites.createProjectileFromSide(img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .........f......................
                .........f............f.........
                .........f............f.........
                .........f.4444444....f.........
                .........ff.4444444444f.........
                ..........f..4444444.4f.........
                ..........4444444.44.4..........
                ..........f......4444f..........
                ..........f..........ff.........
                ..........f...........f.........
                ..........f...........f.........
                ..........f...........f.........
                ..........f...........f.........
                ..........f...........f.........
                .........ff...........f.........
                .........f............f.........
                .........f............f.........
                ................................
                ................................
                ................................
                ................................
                `, 0, Speed)
            projectile.x = randint(0, scene.screenWidth())
            projectile.setKind(SpriteKind.Port)
        }
    }
    if (Math.percentChance(2)) {
        if (Math.percentChance(portChance)) {
            projectile = sprites.createProjectileFromSide(img`
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                ................................
                .........f......................
                .........f............f.........
                .........f.999999.....f.........
                .........f994499999...f.........
                .........ff99999994944f.........
                .....99999999999999994f.........
                ......9999999999999999..........
                ..........f......449999.........
                ..........f..........ff.........
                ..........f...........f.........
                ..........f...........f.........
                ..........f...........f.........
                ..........f...........f.........
                ..........f...........f.........
                .........ff...........f.........
                .........f............f.........
                .........f............f.........
                ................................
                ................................
                ................................
                ................................
                `, 0, Speed)
            projectile.x = randint(0, scene.screenWidth())
            projectile.setKind(SpriteKind.Port)
        }
    }
})
